<!DOCTYPE html>
<html lang="ja">

<head>
  <meta charset="utf-8">

  <title>ใ๏ผในใผใข๏ผ</title>

  <script>
  (function() {
  ย   // from:http://curtaincall.weblike.jp/portfolio-web-sounder/webaudioapi-basic/demos/demo-08
  ยยยยvar onDOMContentLoaded = function() {
  ย
  ยยยยยยยยwindow.AudioContext = window.AudioContext || window.webkitAudioContext;
  ย
  ยยยยยยยยtry {
  ยยยยยยยยยยยย// Create the instance of AudioContext
  ยยยยยยยยยยยยvar context = new AudioContext();
  ยยยยยยยย} catch (error) {
  ยยยยยยยยยยยยwindow.alert(error.message + ' : Please use Chrome or Safari.');
  ยยยยยยยยยยยยreturn;
  ยยยยยยยย}
  ย
  ยยยยยยยย// for legacy browsers
  ยยยยยยยยcontext.createGain = context.createGain || context.createGainNode;
  ย
  ยยยยยยยย// Create the instance of GainNode
  ยยยยยยยยvar gain = context.createGain();
  ย
          var suumo = [
            "ใโ๏ธในใผใขโ๏ธ๐",
            "ใใณ๐ฅ", "ใใณ๐ฅ", "ใใณ๐ฅ", "ใทใฃใผใณ๐ถ",
            "ในใข๐", "ในใข๐", "ในใข๐", "ในใข๐",
            "ในใข๐", "ในใข๐", "ในใใใใขโคด๐",
            "ในใข๐", "ในใข๐", "ในใข๐", "ในใข๐",
            "ในใข๐", "ในใข๐", "ในใใใใขโคต๐"
          ];
          var song = new Array(suumo.length);
          var text = "";

          //https://bost.ocks.org/mike/shuffle/
          var m = suumo.length, t, i;
          for (i = 0; i < m; i++) {
            song[i] = i;
          }
          // While there remain elements to shuffleโฆ
          while (m) {
            // Pick a remaining elementโฆ
            i = Math.floor(Math.random() * m--);

            // And swap it with the current element.
            t = song[m];
            song[m] = song[i];
            song[i] = t;
          }
          for (i = 0; i < m; i++) {
            text += suumo[n];
          }

          document.getElementById("box").innerHTML = "" + text;  ย
  ยยยยยยยย// for the instances of AudioBuffer
  ยยยยยยยยvar buffers = new Array(suumo.length);
  ย
  ยยยยยยยย// for the instances of AudioBufferSourceNode
  ยยยยยยยยvar sources = new Array(suumo.length);
  ย
  ยยยยยยยยvar interval;ย // sec
  ย
  ยยยยยยยย// Create original event
  ยยยยยยยยvar event = document.createEvent('Event');
  ยยยยยยยยevent.initEvent('complete', true, true);
  ย
  ยยยยยยยย// Get ArrayBuffer by Ajax
  ยยยยยยยยvar load = function(url, index) {
  ยยยยยยยยยยยยvar xhr = new XMLHttpRequest();
  ย
  ยยยยยยยยยยยย// Timeout (1 minutes)
  ยยยยยยยยยยยยxhr.timeout = 60000;
  ย
  ยยยยยยยยยยยยxhr.ontimeout = function() {
  ยยยยยยยยยยยยยยยยwindow.alert('Timeout.');
  ยยยยยยยยยยยย};
  ย
  ยยยยยยยยยยยยxhr.onerror = function() {
  ยยยยยยยยยยยยยยยยwindow.alert('Ajax Error.');
  ยยยยยยยยยยยย};
  ย
  ยยยยยยยยยยยยxhr.onload = function() {
  ยยยยยยยยยยยยยยยยif (xhr.status === 200) {
  ยยยยยยยยยยยยยยยยยยยยvar arrayBuffer = xhr.response;ย // Get ArrayBuffer
  ย
  ยยยยยยยยยยยยยยยยยยยยif (arrayBuffer instanceof ArrayBuffer) {
  ยยยยยยยยยยยยยยยยยยยยยยยย// The 2nd argument for decodeAudioData
  ยยยยยยยยยยยยยยยยยยยยยยยยvar successCallback = function(audioBuffer) {
  ยยยยยยยยยยยยยยยยยยยยยยยยยยยย// Get the instance of AudioBuffer
  ยยยยยยยยยยยยยยยยยยยยยยยยยยยยbuffers[index] = audioBuffer;
  ย
  ยยยยยยยยยยยยยยยยยยยยยยยยยยยย// The loading instances of AudioBuffer has completed ?
  ยยยยยยยยยยยยยยยยยยยยยยยยยยยยfor (var i = 0, len = buffers.length; i < len; i++) {
  ยยยยยยยยยยยยยยยยยยยยยยยยยยยยยยยยif (buffers[i] === undefined) {
  ยยยยยยยยยยยยยยยยยยยยยยยยยยยยยยยยยยยยreturn;
  ยยยยยยยยยยยยยยยยยยยยยยยยยยยยยยยย}
  ยยยยยยยยยยยยยยยยยยยยยยยยยยยย}
  ย
  ยยยยยยยยยยยยยยยยยยยยยยยยยยยย// dispatch 'complete' event
  ยยยยยยยยยยยยยยยยยยยยยยยยยยยยdocument.querySelector('button').dispatchEvent(event);
  ยยยยยยยยยยยยยยยยยยยยยยยย};
  ย
  ยยยยยยยยยยยยยยยยยยยยยยยย// The 3rd argument for decodeAudioData
  ยยยยยยยยยยยยยยยยยยยยยยยยvar errorCallback = function(error) {
  ยยยยยยยยยยยยยยยยยยยยยยยยยยยยif (error instanceof Error) {
  ยยยยยยยยยยยยยยยยยยยยยยยยยยยยยยยยwindow.alert(error.message);
  ยยยยยยยยยยยยยยยยยยยยยยยยยยยย} else {
  ยยยยยยยยยยยยยยยยยยยยยยยยยยยยยยยยwindow.alert('Error : "decodeAudioData" method.');
  ยยยยยยยยยยยยยยยยยยยยยยยยยยยย}
  ยยยยยยยยยยยยยยยยยยยยยยยย};
  ย
  ยยยยยยยยยยยยยยยยยยยยยยยย// Create the instance of AudioBuffer (Asynchronously)
  ยยยยยยยยยยยยยยยยยยยยยยยยcontext.decodeAudioData(arrayBuffer, successCallback, errorCallback);
  ยยยยยยยยยยยยยยยยยยยย}
  ยยยยยยยยยยยยยยยย}
  ยยยยยยยยยยยย};
  ย
  ยยยยยยยยยยยยxhr.open('GET', url, true);
  ยยยยยยยยยยยยxhr.responseType = 'arraybuffer';
  ยยยยยยยยยยยยxhr.send(null);
  ยยยยยยยย};
  ย
  ยยยยยยยยfor (var i = 0, len = suumo.length; i < len; i++) {
  ยยยยยยยยยยยยload('./audio/suumo_' + i + ".mp3", i);
  ยยยยยยยย}
  ย
  ยยยยยยยยdocument.querySelector('button').addEventListener('complete', function() {
  ยยยยยยยยยยย
  ยยยยยยยยยยยยthis.addEventListener('click', function() {
  ยยยยยยยยยยยยยยยย// Get base time
  ยยยยยยยยยยยยยยยยvar t0 = context.currentTime;
  ย
  ยยยยยยยยยยยยยยยยfor (var i = 0, len = buffers.length; i < len; i++) {
  ยยยยยยยยยยยยยยยยยยยย// Create the instance of AudioBufferSourceNode
  ยยยยยยยยยยยยยยยยยยยยsources[song[i]] = context.createBufferSource();
  ย
  ยยยยยยยยยยยยยยยยยยยย// for legacy browsers
  ยยยยยยยยยยยยยยยยยยยยsources[song[i]].start = sources[song[i]].start || sources[song[i]].noteGrainOn;ย // noteGrainOn
  ยยยยยยยยยยยยยยยยยยยยsources[song[i]].stopย = sources[song[i]].stopย || sources[song[i]].noteOff;
  ย
  ยยยยยยยยยยยยยยยยยยยย// Set the instance of AudioBuffer
  ยยยยยยยยยยยยยยยยยยยยsources[song[i]].buffer = buffers[song[i]];
  ย
  ยยยยยยยยยยยยยยยยยยยย// AudioBufferSourceNode (Input) -> GainNode (Master Volume) -> AudioDestinationNode (Output)
  ยยยยยยยยยยยยยยยยยยยยsources[song[i]].connect(gain);
  ยยยยยยยยยยยยยยยยยยยยgain.connect(context.destination);

                      interval = sources[song[i]].buffer.duration - 0.05;
  ยยยยยยยยยยยยยยยยยยยยsources[song[i]].start(t0, 0, interval);
  ยยยยยยยยยยยยยยยยยยยยsources[song[i]].stop(t0 + interval);
                      t0 += interval;
  ยยยยยยยยยยยยยยยย}
  ยยยยยยยยยยยย}, false);
  ย
  ยยยยยยยย}, false);
  ยยยย};
  ย
  ยยยยif ((document.readyState === 'interactive') || (document.readyState === 'complete')) {
  ยยยยยยยยonDOMContentLoaded();
  ยยยย} else {
  ยยยยยยยยdocument.addEventListener('DOMContentLoaded', onDOMContentLoaded, true);
  ยยยย}
  ย
  })();
  </script>
</head>

<body>
<button type="button">a</button>
<div id="box"></div>
</body>

</html>
